package maximizeWinFromTwoSegments;

/*
Time Limit Exceeded
63 / 72 testcases passed
 */
public class Solution {
    public int maximizeWin(int[] prizePositions, int k) {
        if (prizePositions.length == 1) {
            return 1;
        }
        if (k==0) {
            return 2;
        }
        int[] countArray = new int[prizePositions.length];
        int firstIndex =0;
        int lastIndex = firstIndex;

        while(lastIndex<prizePositions.length) {
            int diff = prizePositions[lastIndex] - prizePositions[firstIndex];
            if (diff <= k) {
                lastIndex++;
            }else {
                countArray[firstIndex] = lastIndex-firstIndex;
                firstIndex++;
            }
        }
        while(firstIndex<prizePositions.length) {
            countArray[firstIndex] = lastIndex-firstIndex;
            firstIndex++;
        }

        int res = 0;
        for (int i=0; i<countArray.length; i++) {
            for(int j=i+1; j<countArray.length;j++) {
                int overlap = i + countArray[i] - 1 - j;
                int length;
                if (overlap>=0){
                    length = j + countArray[j] -i ;
                }else{
                    length = countArray[j] + countArray[i];
                }
                res = Math.max(res, length);
            }
        }
        return res;
    }
    public static void main(String[] args) {
        Solution s = new Solution();
        int[] prizes = {41680,41688,41709,41716,41742,41744,41753,41778,41783,41791,41796,41833,41840,41867,41874,41888,41897,41904,41977,41982,42008,42022,42039,42042,42046,42088,42128,42138,42148,42150,42194,42244,42263,42280,42288,42301,42330,42384,42385,42389,42390,42415,42427,42459,42480,42486,42551,42577,42588,42591,42610,42611,42637,42639,42653,42672,42689,42702,42756,42764,42792,42796,42800,42841,42858,42862,42871,42914,42915,42921,42932,42956,43070,43157,43192,43198,43251,43265,43358,43384,43394,43403,43414,43442,43453,43465,43484,43505,43546,43595,43623,43637,43647,43717,43734,43744,43754,43756,43855,43864,43896,43994,43995,44017,44039,44055,44082,44098,44121,44159,44167,44219,44243,44286,44290,44340,44351,44396,44456,44464,44530,44530,44646,44664,44668,44676,44710,44715,44719,44721,44729,44734,44793,44803,44822,44842,44843,44860,44890,44891,44943,44959,44973,44992,45008,45028,45059,45060,45074,45081,45082,45095,45099,45101,45105,45107,45117,45121,45132,45145,45146,45151,45191,45239,45256,45266,45270,45300,45330,45337,45374,45396,45413,45437,45437,45467,45470,45481,45490,45497,45508,45667,45680,45691,45721,45727,45732,45805,45814,45832,45840,45861,45861,45864,45878,45883,45895,45897,45932,45969,46007,46029,46081,46086,46120,46125,46156,46169,46180,46184,46256,46308,46315,46317,46322,46344,46363,46366,46378,46414,46419,46426,46429,46504,46505,46506,46508,46513,46533,46565,46575,46576,46598,46599,46654,46717,46719,46728,46736,46756,46758,46767,46788,46811,46835,46845,46864,46916,46975,47013,47062,47063,47069,47087,47090,47093,47111,47119,47127,47132,47156,47188,47209,47213,47275,47279,47317,47343,47355,47368,47392,47392,47415,47434,47442,47484,47531,47575,47575,47577,47631,47635,47669,47710,47716,47730,47732,47770,47833,47843,47857,47926,47941,47947,47962,47963,47976,48005,48016,48081,48090,48100,48111,48175,48176,48189,48201,48201,48267,48404,48490,48519,48530,48624,48667,48736,48805,48844,48885,48893,48906,48927,48929,48941,48984,48990,49045,49057,49070,49144,49222,49274,49276,49286,49301,49318,49337,49340,49377,49407,49413,49417,49419,49436,49478,49492,49535,49566,49646,49711,49744,49747,49788,49795,49824,49829,49873,49922,49947,49989,50005,50022,50036,50093,50148,50161,50178,50192,50194,50208,50218,50231,50238,50254,50261,50278,50291,50304,50307,50363,50365,50367,50398,50418,50456,50467,50469,50474,50501,50538,50556,50568,50573,50577,50640,50652,50685,50693,50700,50706,50725,50746,50766,50768,50781,50834,50850,50850,50881,50890,51006,51020,51026,51031,51046,51051,51074,51082,51106,51122,51138,51143,51190,51206,51218,51243,51338,51343,51356,51370,51371,51418,51440,51462,51479,51487,51488,51496,51549,51607,51642,51672,51687,51688,51700,51705,51771,51771,51782,51824,51837,51850,51860,51867,51892,51908,51918,51985,52001,52005,52030,52051,52064,52132,52161,52207,52217,52240,52309,52332,52363,52368,52421,52484,52553,52571,52594,52675,52687,52719,52724,52799,52808,52987,53000,53010,53111,53133,53135,53153,53164,53185,53229,53263,53269,53283,53286,53297,53310,53315,53372,53377,53380,53402,53438,53443,53506,53509,53546,53599,53612,53644,53693,53718,53721,53735,53746,53787,53827,53896,53911,53922,53939,53961,53972,53989,54033,54041,54047,54072,54077,54089,54106,54112,54133,54185,54197,54201,54209,54224,54254,54309,54342,54348,54364,54369,54369,54397,54419,54430,54467,54545,54559,54617,54623,54724,54735,54736,54780,54781,54785,54792,54793,54830,54882,54896,54972,55007,55020,55034,55090,55092,55148,55200,55202,55219,55221,55222,55274,55276,55287,55316,55324,55343,55379,55390,55394,55434,55435,55443,55464,55549,55553,55556,55586,55620,55622,55639,55643,55676,55676,55683,55748,55778,55812,55815,55957,55958,55986,55996,56013,56016,56025,56054,56074,56076,56087,56120,56122,56129,56148,56150,56160,56207,56209,56284,56342,56369,56438,56466,56477,56493,56509,56521,56542,56557,56579,56605,56637,56640,56694,56705,56731,56745,56747,56771,56783,56797,56811,56841,56864,56904,56921,56944,56967,56995,57046,57072,57107,57112,57113,57115,57148,57215,57235,57236,57258,57272,57277,57280,57282,57285,57302,57309,57331,57334,57370,57377,57440,57442,57443,57538,57589,57609,57611,57621,57623,57655,57681,57690,57703,57730,57758,57769,57788,57830,57831,57847,57863,57872,57880,57885,57896,57921,58005,58008,58011,58040,58061,58086,58100,58138,58185,58225,58228,58241,58260,58275,58330,58338,58388,58390,58410,58441,58484,58490,58575,58621,58627,58670,58716,58724,58728,58742,58743,58745,58771,58813,58830,58838,58848,58852,58862,58930,58934,59009,59053,59053,59079,59098,59112,59129,59148,59207,59208,59227,59257,59457,59468,59498,59506,59517,59517,59552,59554,59556,59600,59600,59645,59681,59685,59686,59740,59761,59774,59799,59802,59833,59876,59905,59962,59972,60022,60027,60036,60075,60083,60105,60144,60160,60171,60173,60194,60220,60264,60273,60280,60299,60302,60336,60342,60361,60366,60377,60524,60532,60567,60568,60574,60575,60609,60610,60618,60626,60629,60641,60666,60680,60693,60693,60728,60731,60734,60794,60804,60866,60881,60907,60922,60954,60955,60987,61074,61075,61089,61101,61101,61147,61215,61225,61280,61300,61328,61351,61358,61389,61406,61410,61417,61431,61446,61448,61461,61471,61490,61498,61510,61512,61550,61551,61569,61579,61620,61647,61684,61731,61754,61764,61811,61818,61878,61880,61881,61901,61950,61983,62012,62017,62024,62025,62081,62139,62148,62204,62212,62250,62251,62272,62297,62334,62336,62337,62363,62375,62382,62403,62412,62425,62450,62461,62473,62503,62530,62539,62555,62566,62568,62580,62586,62590,62599,62645,62659,62665,62686,62729,62750,62760,62768,62772,62796,62838,62890,62904,62935,62964,63019,63021,63021,63069,63086,63099,63099,63107,63154};
        s.maximizeWin(prizes, 904);
    }
}
